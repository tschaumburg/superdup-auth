var sdpAuthCore=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=19)}([function(e,t,r){"use strict";var n=r(13);t.createLoginManager=n.createLoginManager;var o=r(2);t.parse=o.parse},function(e,t,r){"use strict";function n(e){if(!e)return null;var t={},r=u.parse(e);if(r.fragment){t.hash={};for(var n=r.fragment.split("&"),o=0;o<n.length;o++){var i=n[o];if(i){var s=i.split("=");2==s.length&&"state"===s[0].trim()&&(t.hash.state=s[1])}}}return t}function o(e){return e?c(e).exp:0}function i(e){return e<Date.now()/1e3}function s(e){var t=n(e);if(!t)return null;if(!t.hash)return null;if(!t.hash.state)return null;var r=JSON.parse(decodeURIComponent(t.hash.state));return r?r:null}function a(e){var t=n(e);return t&&t.hash&&t.hash.nonce?t.hash.nonce:null}var u=r(2),c=r(23);t.parseRedirectUrl=n,t.getExpiration=o,t.isExpired=i,t.decodeHash=s,t.decodeNonce=a},function(e,t,r){"use strict";function n(e){var t=e.match(/^(http|https|ftp)?(?:[\:\/]*)([a-z0-9\.-]*)(?:\:([0-9]+))?(\/[^?#]*)?(?:\?([^#]*))?(?:#(.*))?$/i),r={};return r.protocol="",r.host=t[2],r.port="",r.path="",r.query="",r.fragment="",t[1]&&(r.protocol=t[1]),t[3]&&(r.port=t[3]),t[4]&&(r.path=t[4]),t[5]&&(r.query=t[5]),t[6]&&(r.fragment=t[6]),r}function o(e,t){if(e)return null;var r;try{r=new URL(e)}catch(e){return null}var n=r.search;if(n)return null;for(var o=n.substring(1).split("&"),i=0;i<o.length;i++){var s=o[i].split("=");if(2==s.length&&t===s[0].trim())return decodeURIComponent(s[1]).trim()}return null}t.parse=n,t.getParameter=o},function(e,t,r){"use strict";var n=function(){function e(e,t){void 0===t&&(t=""),this._console=e,this._prefix=t}return e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._console.error(this._prefix+": "+e,t)},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._console.warn(this._prefix+": "+e,t)},e.prototype.log=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._console.log(this._prefix+": "+e,t)},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._console.info(this._prefix+": "+e,t)},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._console.debug(this._prefix+": "+e,t)},e.prototype.trace=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._console.trace(this._prefix+": "+e,t)},e.prototype.sublog=function(t){return new e(this._console,this._prefix+"."+t)},e}();t.ConsoleLogger=n},function(e,t,r){"use strict";var n=function(){function e(e,t,r){this.manager=e,this.log=t,this.name=r}return e.prototype.login=function(e,t,r,n){this.manager.login(this.name,e,t,r,n,this.log)},Object.defineProperty(e.prototype,"user",{get:function(){return this.manager.getUser(this.name,this.log)},enumerable:!0,configurable:!0}),e.prototype.getTokenNames=function(){return this.manager.getTokenNames(this.name,this.log)},e.prototype.getTokenValue=function(e){return this.manager.getTokenValue(e)},e.prototype.logout=function(){this.manager.logout2(this.name,this.log)},e}();t.Login=n},function(e,t,r){"use strict";var n=r(9);t.createBuilderManager=n.createBuilderManager},function(e,t,r){"use strict";var n=r(20);t.createProviderManager=n.createProviderManager},function(e,t,r){"use strict";var n=r(4),o=function(){function e(e,t,r){this.builderManager=e,this.loginManager=t,this.flow=r,this.tokens=[]}return e.prototype.withParameters=function(e){return this.parameters=e,this},e.prototype.providingAccessToken=function(e,t,r,n){return this.tokens.push({tokenName:e,resource:t,scopes:r,protectUrls:n}),this},e.prototype.registerAs=function(e){this.loginName=e;for(var t=this.loginManager.registerHybridProvider(this.loginName,this.flow,this.parameters),r=0,o=this.tokens;r<o.length;r++){var i=o[r];this.loginManager.registerAccessToken(i.tokenName,this.loginName,i.resource,i.scopes,i.protectUrls)}var s=new n.Login(this.loginManager,t,this.loginName);return this.builderManager.registerLogin(this.loginName,s),s},e}();t.HybridBuilder=o},function(e,t,r){"use strict";var n=r(4),o=function(){function e(e,t,r){this.builderManager=e,this.loginManager=t,this.flow=r,this.tokens=[]}return e.prototype.withParameters=function(e){return this.parameters=e,this},e.prototype.providingAccessToken=function(e,t,r,n){return this.tokens.push({tokenName:e,resource:t,scopes:r,protectUrls:n}),this},e.prototype.registerAs=function(e){this.loginName=e;for(var t=this.loginManager.registerImplicitProvider(this.loginName,this.flow,this.parameters),r=0,o=this.tokens;r<o.length;r++){var i=o[r];this.loginManager.registerAccessToken(i.tokenName,this.loginName,i.resource,i.scopes,i.protectUrls)}var s=new n.Login(this.loginManager,t,this.loginName);return this.builderManager.registerLogin(this.loginName,s),s},e}();t.ImplicitBuilder=o},function(e,t,r){"use strict";function n(e){return new s(e)}var o=r(8),i=r(7),s=function(){function e(e){this.loginManager=e,this._logins={}}return e.prototype.useImplicitFlow=function(e){return new o.ImplicitBuilder(this,this.loginManager,e)},e.prototype.useHybridFlow=function(e){return new i.HybridBuilder(this,this.loginManager,e)},e.prototype.registerLogin=function(e,t){this._logins[e]=t},e.prototype.getLogin=function(e){return this._logins[e]},e.prototype.getLoginNames=function(){var e=[];for(var t in this._logins)e.push(t);return e},e}();t.createBuilderManager=n},function(e,t,r){"use strict";var n=function(){function e(e,t,r){this._storage=e,this._storagekey=t,this.log=r,this._cache={},this.loadState()}return e.prototype.set=function(e,t){this._cache[e]=t,this.saveState()},e.prototype.get=function(e){return this._cache[e]},e.prototype.clear=function(e){this._cache[e]=null,this.saveState()},e.prototype.loadState=function(){this.log.info("Reloading persisted state...");var e=this._storage.retrieve(this._storagekey);this._cache=JSON.parse(e),this._cache||(this.log.info("...no data found"),this._cache={})},e.prototype.saveState=function(){this.log.info("Persisting state...");var e=JSON.stringify(this._cache);this._storage.store(this._storagekey,e)},e}();t.DataStore=n},function(e,t,r){"use strict";var n=r(10);t.DataStore=n.DataStore;var o=r(12);t.LocalStorageStore=o.LocalStorageStore},function(e,t,r){"use strict";var n=function(){function e(){}return e.prototype.retrieve=function(e){var t=window.localStorage[e];return t?t:null},e.prototype.store=function(e,t){window.localStorage[e]=t},e}();t.LocalStorageStore=n},function(e,t,r){"use strict";function n(e,t){return new u(e,t)}var o=r(3),i=r(11),s=r(14),a=r(17);t.createLoginManager=n;var u=function(){function e(e,t){this._flowManager=e,this._log=t,this._urlMapper=new a.UrlMapper,t||(t=console),t.sublog||(t=new o.ConsoleLogger(t,"auth")),this.log=t,this._userManager=new i.DataStore(new i.LocalStorageStore,"sdpIdTokens",t);var r=this;this._tokenManager=s.createTokenManager(function(e,t,n,o,i){r.acquireAccessToken(e,t,n,o,i)},t)}return Object.defineProperty(e.prototype,"flowManager",{get:function(){return this._flowManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tokenManager",{get:function(){return this._tokenManager},enumerable:!0,configurable:!0}),e.prototype.registerAccessToken=function(e,t,r,n,o){if(this.tokenManager.registerInfo(e,t,r,n,o,this.log),o)for(var i=0,s=o;i<s.length;i++){var a=s[i];this._urlMapper.add(a,e)}},e.prototype.getTokenNames=function(e,t){return this.tokenManager.getTokenNames(e,t)},e.prototype.getTokenValue=function(e){return this.tokenManager.getTokenValue(e)},e.prototype.resolveAccessToken=function(e,t,r){var n=this.log.sublog("resolveAccessToken"),o=this._urlMapper.map(e);o||t(null),this.tokenManager.getValue(o,t,r,n)},e.prototype.registerImplicitProvider=function(e,t,r){var n=this.log.sublog(e);return this.flowManager.registerImplicitProvider(e,function(){return new t(r,n)},this.log),n},e.prototype.registerHybridProvider=function(e,t,r){var n=this.log.sublog(e);return this.flowManager.registerHybridProvider(e,function(){return new t(r,n)},this.log),n},e.prototype.login=function(e,t,r,n,o,i){var s=this;if(i.info("login(loginName="+e+", accessTokenName="+t+")"),!e){var a="login(): loginName must be specified - either explicitly or implicitly through setDefaultProvider()";return i.error(a),o(a,r)}var u=this.flowManager.findProvider(e);if(!u){var a="No login named "+e+" has been registered";return i.error(a),o(a,r)}var c=null;if(t){var l=this.tokenManager.findInfo(t,i);l&&(c={name:l.tokenName,resource:l.resource,scopes:l.scopes})}var g=this.makeNonce();i.info("login(loginName="+e+", nonce="+g+", token="+JSON.stringify(c)+")"),u.login(g,{flow:e,at:t,nonce:g,uss:r},c,function(r,o,a){i.info("Login succeeeded!"),s.tokenManager.setValue(t,o,i),s._userManager.set(e,r),n(r,a)},o)},e.prototype.makeNonce=function(){for(var e="n",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<10;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},e.prototype.handleRedirect=function(e,t,r){var n=this,o=this.log.sublog("handleRedirect"),i=e&&e.substr(0,20);o.debug("handleRedirect(): Checking if this is an authentication response redirect (url="+i+"...)");var a=s.decodeHash(e);if(!a){var u="Not a redirect url";return o.debug("handleRedirect(): ...not a redirect"),r(null,u,void 0),null}var c=a.flow,l=a.at,g=a.uss,f=a.nonce,h=this.flowManager.findProvider(c);if(!h){var u="Redirect URL references login named "+c+" - but no such login has been registered";return o.error("handleRedirect(): "+u),r(c,u,g),null}var p=l;return o.debug("handleRedirect() => "+c+".handleRedirect()"),h.handleRedirect(e,f,l,function(e,r,i){o.info("handleRedirect(): successful redirect processed");var s=r&&r.substr(0,r.length/2),a=e.idtoken&&e.idtoken.substr(0,e.idtoken.length/2);o.debug("handleRedirect(): Saving tokens"),o.debug("handleRedirect():    idtoken = "+a),o.debug("handleRedirect():    "+p+" = "+s),n.tokenManager.setValue(p,r,o),n._userManager.set(c,e),t(c,e,g)},function(e,t){r(c,e,t)}),g},e.prototype.logout2=function(e,t){if(t.info("logout(loginName="+e+")"),!e){var r="logout(): plugin must be specified - either explicitly or implicitly through setDefaultProvider()";throw t.error(r),new Error(r)}if(!this.flowManager.findProvider(e)){var r="No login named "+e+" has been registered";throw t.error(r),new Error(r)}this.tokenManager.clearValues(e,t),this._userManager.clear(e)},e.prototype.acquireAccessToken=function(e,t,r,n,o){if(!e)return o("Unnamed login");var i=this.flowManager.findProvider(e);if(!i)return o('Could not find login "'+e+'"');var s=i;if(!s||!s.acquireAccessToken)return o('Flow "'+e+'" does not support token acquisition after login');s.acquireAccessToken(t,r,n,o)},e.prototype.getUser=function(e,t){return this._userManager.get(e)},e}();t.LoginManager=u},function(e,t,r){"use strict";var n=r(15);t.createTokenManager=n.createTokenManager;var o=r(1);t.decodeHash=o.decodeHash;var i=r(1);t.decodeNonce=i.decodeNonce},function(e,t,r){"use strict";function n(e,t,r){return void 0===r&&(r=null),r||(r=new i.LocalStorageTokenStore),new s(r,e,t)}var o=r(1),i=r(16);t.createTokenManager=n;var s=function(){function e(e,t,r){this.tokenStore=e,this.acquireAccessToken=t,this._tokens={},this.loadState(r)}return e.prototype.findInfo=function(e){return this._tokens[e]},e.prototype.loadState=function(e){e.info("Reloading persisted authentication state...");var t=this.tokenStore.loadAll();if(!t)return void e.info("...no tokens found");e.info("...reloaded "+t.length+" access tokens from token storage");for(var r=0;r<t.length;r++){var n=t[r];n.tokenValue?o.isExpired(n.expiresAt)?e.debug("   ...skipping access token "+n.tokenName+" (expired)"):(e.debug("   ...reloaded access token "+n.tokenName+" from token storage"),this._tokens[n.tokenName]=n):e.debug("   ...skipping access token "+n.tokenName+" (no value)")}},e.prototype.saveState=function(e){e.info("Persisting authentication state...");var t=[];for(var r in this._tokens){var n=this._tokens[r];n.tokenValue?o.isExpired(n.expiresAt)?e.debug("   ...skipping access token "+n.tokenName+" (expired)"):(e.debug("   ...saving access token "+n.tokenName+" to token storage"),t.push(n)):e.debug("   ...skipping access token "+n.tokenName+" (no value)")}this.tokenStore.saveAll(t),e.info("...saved "+t.length+" access tokens")},e.prototype.registerInfo=function(e,t,r,n,o,i){if(!o||0==o.length)return void i.info("Trying to register access token without any URLs");i.debug('Registering access token "'+e+'" (resource='+r+", scopes="+JSON.stringify(n)+", urls="+JSON.stringify(o)+")");var s=this._tokens[e],a={loginName:t,tokenName:e,protectUrls:o,resource:r,scopes:n,tokenValue:null,expiresAt:null};if(s){if(this.sameDefinition(s,a))return;i.error('Trying to redefine access token "'+e+'"')}this._tokens[e]=a},e.prototype.sameDefinition=function(e,t){return e==t||!!e&&(!!t&&(e.tokenName===t.tokenName&&(e.resource===t.resource&&(!!this.sameList(e.scopes,t.scopes)&&!!this.sameList(e.protectUrls,t.protectUrls)))))},e.prototype.sameList=function(e,t){if(e==t)return!0;if(!e)return!1;if(!t)return!1;if(e.length!==t.length)return!1;e=e.sort(),t=t.sort();for(var r in e)if(e[r]!==t[r])return!1;return!0},e.prototype.getTokenNames=function(e,t){var r=[];for(var n in this._tokens){this._tokens[n].loginName===e&&r.push(n)}return r},e.prototype.getTokenValue=function(e){var t=this._tokens[e];return t?t.tokenValue:null},e.prototype.getValue=function(e,t,r,n){if(!r)throw new Error("error callback must be specified");if(!t)return r("success callback must be specified");if(!e)return t(null);var i=this._tokens[e];return i?(o.isExpired(i.expiresAt)&&(i.tokenValue=null,i.expiresAt=null),i.tokenValue?t(i.tokenValue):(this.acquireToken(i,function(e){t(e)},function(e){r(e)},n),void t(null))):t(null)},e.prototype.acquireToken=function(e,t,r,n){var i=this;this.acquireAccessToken(e.loginName,e.resource,e.scopes,function(r){e.tokenValue=r,e.expiresAt=o.getExpiration(r),i.saveState(n),t(r)},r)},e.prototype.setValue=function(e,t,r){var n=this._tokens[e];return n?t?(n.tokenValue=t,n.expiresAt=o.getExpiration(t),void this.saveState(r)):void r.debug("Unexpected: resolving null value for access token "+e):void r.debug("Unexpected: resolving value for unregistered access token "+e)},e.prototype.clearValues=function(e,t){for(var r in this._tokens){var n=this._tokens[r];n.loginName===e&&(n.tokenValue=null,n.expiresAt=0)}this.saveState(t)},e}()},function(e,t,r){"use strict";var n=function(){function e(){this.key="sdpTokens"}return e.prototype.loadAll=function(){var e=window.localStorage[this.key];return e?JSON.parse(e):[]},e.prototype.saveAll=function(e){e||(e=[]);var t=JSON.stringify(e);window.localStorage[this.key]=t},e}();t.LocalStorageTokenStore=n},function(e,t,r){"use strict";var n=r(18);t.UrlMapper=n.UrlMapper},function(e,t,r){"use strict";var n=(r(2),function(){function e(){this._valuesByDescendingUrl=[]}return e.prototype.findEntry=function(e){if(!e)return null;for(var t=0;t<this._valuesByDescendingUrl.length;t++){var r=this._valuesByDescendingUrl[t],n=r.urlPrefix;if(n.length<e.length)return null;if(n===e)return r}return null},e.prototype.sort=function(){this._valuesByDescendingUrl=this._valuesByDescendingUrl.sort(function(e,t){return e.urlPrefix.length-t.urlPrefix.length})},e.prototype.add=function(e,t){if(e){var r=this.findEntry(e);r||(r={urlPrefix:e,value:t},this._valuesByDescendingUrl.push(r),this.sort()),r.value=t}},e.prototype.map=function(e){if(!e)return null;for(var t=0;t<this._valuesByDescendingUrl.length;t++){var r=this._valuesByDescendingUrl[t],n=r.urlPrefix;if(0==e.indexOf(n))return r.value}return null},e}());t.UrlMapper=n},function(e,t,r){"use strict";function n(e){return a.createLoginManager(u.createProviderManager(),e)}function o(e){return c.parse(e)}var i=r(3);t.ConsoleLogger=i.ConsoleLogger;var s=r(5);t.createBuilderManager=s.createBuilderManager;var a=r(0),u=r(6);t.createLoginManager2=n;var c=r(0);t.urlparse=o},function(e,t,r){"use strict";function n(){return new o}t.createProviderManager=n;var o=function(){function e(){this._flows={}}return e.prototype.registerImplicitProvider=function(e,t,r){r.debug('Registering authentication flow "'+e+'"'),this._flows[e]={creator:t,flow:null}},e.prototype.registerHybridProvider=function(e,t,r){r.debug('Registering hybrid flow "'+e+'"'),this._flows[e]={creator:t,flow:null}},e.prototype.findProvider=function(e){var t=this._flows[e];return t?(t.flow||(t.flow=t.creator()),t.flow):null},e}()},function(e,t){function r(e){this.message=e}function n(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,s=0,a=0,u="";i=t.charAt(a++);~i&&(n=s%4?64*n+i:i,s++%4)?u+=String.fromCharCode(255&n>>(-2*s&6)):0)i=o.indexOf(i);return u}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||n},function(e,t,r){function n(e){return decodeURIComponent(o(e).replace(/(.)/g,function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}var o=r(21);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return n(t)}catch(e){return o(t)}}},function(e,t,r){"use strict";var n=r(22);e.exports=function(e,t){if("string"!=typeof e)throw new Error("Invalid token specified");t=t||{};var r=t.header===!0?0:1;return JSON.parse(n(e.split(".")[r]))}}]);